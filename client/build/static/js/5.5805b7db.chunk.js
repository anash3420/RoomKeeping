(this.webpackJsonproomkeeping=this.webpackJsonproomkeeping||[]).push([[5],{1306:function(e,t,a){"use strict";var l=a(0),n=a.n(l);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function s(e,t,a){return t&&c(e.prototype,t),a&&c(e,a),e}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e}).apply(this,arguments)}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},l=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),l.forEach((function(t){i(e,t,a[t])}))}return e}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?p(e):t}var E={display:"inline-block",borderRadius:"50%",border:"5px double white",width:30,height:30},v={empty:u({},E,{backgroundColor:"#ccc"}),full:u({},E,{backgroundColor:"black"}),placeholder:u({},E,{backgroundColor:"red"})},h=function(e){return n.a.isValidElement(e)?e:"object"===o(e)&&null!==e?n.a.createElement("span",{style:e}):"[object String]"===Object.prototype.toString.call(e)?n.a.createElement("span",{className:e}):void 0},y=function(e){function t(){return r(this,t),g(this,b(t).apply(this,arguments))}return d(t,e),s(t,[{key:"render",value:function(){var e,t=this.props,a=t.index,l=t.inactiveIcon,o=t.activeIcon,r=t.percent,c=t.direction,s=t.readonly,m=t.onClick,u=t.onMouseMove,d=h(l),b=r<100?{}:{visibility:"hidden"},f=h(o),p=(i(e={display:"inline-block",position:"absolute",overflow:"hidden",top:0},"rtl"===c?"right":"left",0),i(e,"width","".concat(r,"%")),e),g={cursor:s?"inherit":"pointer",display:"inline-block",position:"relative"};function E(e){u&&u(a,e)}function v(e){m&&(e.preventDefault(),m(a,e))}return n.a.createElement("span",{style:g,onClick:v,onMouseMove:E,onTouchMove:E,onTouchEnd:v},n.a.createElement("span",{style:b},d),n.a.createElement("span",{style:p},f))}}]),t}(n.a.PureComponent),N=function(e){function t(e){var a;return r(this,t),(a=g(this,b(t).call(this,e))).state={displayValue:a.props.value,interacting:!1},a.onMouseLeave=a.onMouseLeave.bind(p(p(a))),a.symbolMouseMove=a.symbolMouseMove.bind(p(p(a))),a.symbolClick=a.symbolClick.bind(p(p(a))),a}return d(t,e),s(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.value!==e.value;this.setState((function(a){return{displayValue:t?e.value:a.displayValue}}))}},{key:"componentDidUpdate",value:function(e,t){if(e.value===this.props.value)return t.interacting&&!this.state.interacting?this.props.onHover():void(this.state.interacting&&this.props.onHover(this.state.displayValue))}},{key:"symbolClick",value:function(e,t){var a=this.calculateDisplayValue(e,t);this.props.onClick(a,t)}},{key:"symbolMouseMove",value:function(e,t){var a=this.calculateDisplayValue(e,t);this.setState({interacting:!this.props.readonly,displayValue:a})}},{key:"onMouseLeave",value:function(){this.setState({displayValue:this.props.value,interacting:!1})}},{key:"calculateDisplayValue",value:function(e,t){var a=this.calculateHoverPercentage(t),l=Math.ceil(a%1*this.props.fractions)/this.props.fractions,n=Math.pow(10,3),o=e+(Math.floor(a)+Math.floor(l*n)/n);return o>0?o>this.props.totalSymbols?this.props.totalSymbols:o:1/this.props.fractions}},{key:"calculateHoverPercentage",value:function(e){var t=e.nativeEvent.type.indexOf("touch")>-1?e.nativeEvent.type.indexOf("touchend")>-1?e.changedTouches[0].clientX:e.touches[0].clientX:e.clientX,a=e.target.getBoundingClientRect(),l="rtl"===this.props.direction?a.right-t:t-a.left;return l<0?0:l/a.width}},{key:"render",value:function(){var e,t=this.props,a=t.readonly,l=t.quiet,o=t.totalSymbols,r=t.value,c=t.placeholderValue,s=t.direction,i=t.emptySymbol,d=t.fullSymbol,b=t.placeholderSymbol,f=t.className,p=t.id,g=t.style,E=t.tabIndex,v=this.state,h=v.displayValue,N=v.interacting,R=[],w=[].concat(i),x=[].concat(d),O=[].concat(b),j=0!==c&&0===r&&!N;e=j?c:l?r:h;for(var S=Math.floor(e),C=0;C<o;C++){var T=void 0;T=C-S<0?100:C-S===0?100*(e-C):0,R.push(n.a.createElement(y,m({key:C,index:C,readonly:a,inactiveIcon:w[C%w.length],activeIcon:j?O[C%x.length]:x[C%x.length],percent:T,direction:s},!a&&{onClick:this.symbolClick,onMouseMove:this.symbolMouseMove,onTouchMove:this.symbolMouseMove,onTouchEnd:this.symbolClick})))}return n.a.createElement("span",m({id:p,style:u({},g,{display:"inline-block",direction:s}),className:f,tabIndex:E,"aria-label":this.props["aria-label"]},!a&&{onMouseLeave:this.onMouseLeave}),R)}}]),t}(n.a.PureComponent);function R(){}R._name="react_rating_noop";var w=function(e){function t(e){var a;return r(this,t),(a=g(this,b(t).call(this,e))).state={value:e.initialRating},a.handleClick=a.handleClick.bind(p(p(a))),a.handleHover=a.handleHover.bind(p(p(a))),a}return d(t,e),s(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({value:e.initialRating})}},{key:"handleClick",value:function(e,t){var a=this,l=this.translateDisplayValueToValue(e);this.props.onClick(l),this.state.value!==l&&this.setState({value:l},(function(){return a.props.onChange(a.state.value)}))}},{key:"handleHover",value:function(e){var t=void 0===e?e:this.translateDisplayValueToValue(e);this.props.onHover(t)}},{key:"translateDisplayValueToValue",value:function(e){var t=e*this.props.step+this.props.start;return t===this.props.start?t+1/this.props.fractions:t}},{key:"tranlateValueToDisplayValue",value:function(e){return void 0===e?0:(e-this.props.start)/this.props.step}},{key:"render",value:function(){var e=this.props,t=e.step,a=e.emptySymbol,l=e.fullSymbol,o=e.placeholderSymbol,r=e.readonly,c=e.quiet,s=e.fractions,i=e.direction,m=e.start,u=e.stop,d=e.id,b=e.className,f=e.style,p=e.tabIndex;return n.a.createElement(N,{id:d,style:f,className:b,tabIndex:p,"aria-label":this.props["aria-label"],totalSymbols:function(e,t,a){return Math.floor((t-e)/a)}(m,u,t),value:this.tranlateValueToDisplayValue(this.state.value),placeholderValue:this.tranlateValueToDisplayValue(this.props.placeholderRating),readonly:r,quiet:c,fractions:s,direction:i,emptySymbol:a,fullSymbol:l,placeholderSymbol:o,onClick:this.handleClick,onHover:this.handleHover})}}]),t}(n.a.PureComponent);w.defaultProps={start:0,stop:5,step:1,readonly:!1,quiet:!1,fractions:1,direction:"ltr",onHover:R,onClick:R,onChange:R,emptySymbol:v.empty,fullSymbol:v.full,placeholderSymbol:v.placeholder},t.a=w},1706:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),o=a(22),r=a(15),c=a(1310),s=a.n(c),i=a(40),m=a.n(i),u=a(1282),d=a(92),b=a(51),f=a(28),p=a(1216);function g(e){var t,a=e.data,o=e.onRefreshTable,c=e.show,s=e.onHide,i=e.hostel,g=Object(l.useState)(!1),E=Object(r.a)(g,2),v=E[0],h=E[1],y=function(){m.a.get("/api/clean-requests/".concat(a.role,"?hostel=").concat(i,"&name=").concat(a.name)).then((function(e){o(e.data),s()})).catch((function(e){console.log(e)}))},N={message:""},R=f.d().shape({message:f.f().required("Reason is Required!")}),w=Object(b.c)({initialValues:N,validationSchema:R,onSubmit:function(e){!function(e){h(!0),m.a.post("/api/rejectRequest",{role:a.role,name:a.name,id:a.value,message:e.message}).then((function(){setTimeout((function(){h(!1)}),2e3)})).catch((function(e){console.log(e),h(!1)})).then((function(){setTimeout((function(){y(),s()}),1e3)}))}(e)},onReset:function(){w.setValues({message:N.message})}});return n.a.createElement(u.a,{size:"lg",show:c,onHide:s,"aria-labelledby":"Reject-Modal"},v&&n.a.createElement(d.f,null),n.a.createElement("form",{onSubmit:w.handleSubmit,onReset:w.handleReset},n.a.createElement(u.a.Header,{closeButton:!0},n.a.createElement(u.a.Title,{id:"Delete-Modal"},"Reject Clean-Request")),n.a.createElement(u.a.Body,null,v?n.a.createElement("span",null,"Rejecting Request..."):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-xl-1 col-lg-1 col-form-label text-alert"},"Room:"),n.a.createElement("div",{className:"col-lg-3 col-xl-3 "},n.a.createElement("input",{type:"text",className:"form-control",value:a.room,disabled:!0})),n.a.createElement("div",{className:"col-lg-2 col-xl-2 "}),n.a.createElement("label",{className:"col-xl-1 col-lg-1 col-form-label text-alert"},"Floor:"),n.a.createElement("div",{className:"col-lg-3 col-xl-3 "},n.a.createElement("input",{type:"text",className:"form-control",value:a.floor,disabled:!0}))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-xl-1 col-lg-1 col-form-label text-alert"},"Date:"),n.a.createElement("div",{className:"col-lg-3 col-xl-3 "},n.a.createElement("input",{type:"text",className:"form-control",value:a.date,disabled:!0})),n.a.createElement("div",{className:"col-lg-2 col-xl-2 "}),n.a.createElement("label",{className:"col-xl-1 col-lg-1 col-form-label text-alert"},"Time:"),n.a.createElement("div",{className:"col-lg-3 col-xl-3 "},n.a.createElement("input",{type:"text",className:"form-control",value:a.time,disabled:!0}))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-xl-12 col-lg-12 col-form-label text-alert"},"Reason for Rejection"," ",n.a.createElement("strong",{className:"text-danger"},"*")),n.a.createElement("div",{className:"col-lg-10 col-xl-10 "},n.a.createElement(p.a,Object.assign({placeholder:"Message",className:"form-control form-control-lg form-control-solid ".concat((t="message",w.touched[t]&&w.errors[t]?"is-invalid":w.touched[t]&&!w.errors[t]?"is-valid":"")),name:"message",autoComplete:"off"},w.getFieldProps("message"))),w.touched.message&&w.errors.message?n.a.createElement("div",{className:"invalid-feedback"},w.errors.message):null)))),n.a.createElement(u.a.Footer,null,n.a.createElement("div",null,n.a.createElement("button",{type:"reset",onClick:s,className:"btn btn-light btn-elevate"},"Cancel"),n.a.createElement(n.a.Fragment,null," "),n.a.createElement("button",{type:"submit",className:"btn btn-danger btn-elevate"},"Confirm")))))}var E=a(1245),v=a(1241),h=a(18),y=a(1232),N=a(1235),R=a(1237),w=a(1230),x=a(1236),O=a(1231),j=a(1234),S=a(609),C=Object(h.a)((function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}}))(w.a),T=Object(h.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}}))(O.a),k=Object(y.a)((function(e){return{root:{width:"100%",marginTop:e.spacing(3),overflowX:"auto"}}}));function D(e){var t=e.data,a=e.onRefreshTable,o=e.show,c=e.onHide,s=e.hostel,i=Object(l.useState)(!1),p=Object(r.a)(i,2),g=p[0],h=p[1],y=Object(l.useState)([]),w=Object(r.a)(y,2),D=w[0],H=w[1],q=Object(l.useState)(""),F=Object(r.a)(q,2),M=F[0],P=F[1],I=Object(l.useState)(""),B=Object(r.a)(I,2),V=B[0],L=B[1],A=Object(l.useState)([]),K=Object(r.a)(A,2),z=K[0],_=K[1],G=k();Object(l.useEffect)((function(){m.a.get("/api/allotRequest?hostel=".concat(s)).then((function(e){H(e.data)})).catch((function(e){console.log(e)}))}),[s]);var W=function(e){h(!0),m.a.post("/api/allotRequest",{id:t.id,roomKeeper:M}).then((function(){setTimeout((function(){h(!1)}),2e3)})).catch((function(e){console.log(e),h(!1)})).then((function(){P(""),L(!1),setTimeout((function(){U(),c()}),1e3)}))},U=function(){m.a.get("/api/clean-requests/admin?hostel=".concat(s)).then((function(e){a(e.data),c()})).catch((function(e){console.log(e)}))},X={roomKeeper:""},Y=f.d().shape({roomKeeper:f.f().required("RoomKeeper Name is Required!")}),J=Object(b.c)({initialValues:X,validationSchema:Y,onSubmit:function(e){W()},onReset:function(){P(""),L(!1),_([]),J.setValues({roomKeeper:X.roomKeeper})}});return n.a.createElement(u.a,{size:"lg",show:o,onHide:c,"aria-labelledby":"Reject-Modal"},g&&n.a.createElement(d.f,null),n.a.createElement("form",{onSubmit:J.handleSubmit,onReset:J.handleReset},n.a.createElement(u.a.Header,{closeButton:!0},n.a.createElement(u.a.Title,{id:"Delete-Modal"},"Allot RoomKeeper",n.a.createElement(S.a,{variant:"subtitle1",display:"block",gutterBottom:!0},"Allot RoomKeeper for the given clean-request."))),n.a.createElement(u.a.Body,null,g?n.a.createElement("span",null,"Alloting RoomKeeper..."):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-xl-1 col-lg-1 col-form-label text-alert"},"Room:"),n.a.createElement("div",{className:"col-lg-3 col-xl-3 "},n.a.createElement("input",{type:"text",className:"form-control",value:t.room,disabled:!0})),n.a.createElement("div",{className:"col-lg-2 col-xl-2 "}),n.a.createElement("label",{className:"col-xl-1 col-lg-1 col-form-label text-alert"},"Floor:"),n.a.createElement("div",{className:"col-lg-3 col-xl-3 "},n.a.createElement("input",{type:"text",className:"form-control",value:t.floor,disabled:!0}))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-xl-1 col-lg-1 col-form-label text-alert"},"Date:"),n.a.createElement("div",{className:"col-lg-3 col-xl-3 "},n.a.createElement("input",{type:"text",className:"form-control",value:t.date,disabled:!0})),n.a.createElement("div",{className:"col-lg-2 col-xl-2 "}),n.a.createElement("label",{className:"col-xl-1 col-lg-1 col-form-label text-alert"},"Time:"),n.a.createElement("div",{className:"col-lg-3 col-xl-3 "},n.a.createElement("input",{type:"text",className:"form-control",value:t.time,disabled:!0}))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-xl-3 col-lg-3 col-form-label text-alert"},"RoomKeeper Name",n.a.createElement("strong",{className:"text-danger"},"*")),n.a.createElement("div",{className:"col-lg-7 col-xl-7 "},n.a.createElement(v.a,{style:{width:"100%"},id:"nameLabel",name:"roomKeeper",value:M,label:"Age",onChange:function(e){P(e.target.value),m.a.get("/api/schedule?roomKeeper=".concat(e.target.value,"&date=").concat(t.date)).then((function(e){L(!0),_(e.data)})).catch((function(e){console.log(e)}))}},D.map((function(e){return n.a.createElement(E.a,{value:e.name,key:e._id},e.name)}))),J.touched.roomKeeper&&J.errors.roomKeeper?n.a.createElement("div",{className:"invalid-feedback"},J.errors.roomKeeper):null)),void 0!==t.rejectData&&n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-xl-2 col-lg-2 col-form-label text-danger"},"Rejected By:"),n.a.createElement("div",{className:"col-lg-3 col-xl-3 "},n.a.createElement("input",{type:"text",className:"form-control",value:t.rejectData.name,disabled:!0})),n.a.createElement("label",{className:"col-xl-1 col-lg-1 col-form-label text-danger"},"Reason:"),n.a.createElement("div",{className:"col-lg-4 col-xl-4 "},n.a.createElement("input",{type:"textarea",className:"form-control",value:t.rejectData.message,disabled:!0}))),n.a.createElement("div",{style:{maxHeight:"275px",minHeight:"200px"}},V&&n.a.createElement(n.a.Fragment,null,n.a.createElement("h5",{className:"text-dark"},M,"'s Schedule on ",t.date,":"),n.a.createElement(j.a,{className:G.root},n.a.createElement(N.a,null,n.a.createElement(x.a,null,n.a.createElement(O.a,null,n.a.createElement(C,{align:"center"},"Room No."),n.a.createElement(C,{align:"center"},"Floor"),n.a.createElement(C,{align:"center"},"Time Requested"))),n.a.createElement(R.a,null,0===z.length?n.a.createElement("div",{className:"text-center w-100",style:{margin:"25px 75% 25px 75%"}},n.a.createElement(S.a,{variant:"button",display:"block",gutterBottom:!0},"No Alloted Requests!")):z.map((function(e){return n.a.createElement(T,{key:e._id},n.a.createElement(C,{component:"th",scope:"row",align:"center"},e.room),n.a.createElement(C,{align:"center"},e.floor),n.a.createElement(C,{align:"center"},e.time))}))))))))),n.a.createElement(u.a.Footer,null,n.a.createElement("div",null,!g&&n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{type:"reset",onClick:c,className:"btn btn-light btn-elevate"},"Cancel"),n.a.createElement(n.a.Fragment,null," "),n.a.createElement("button",{type:"button",className:"btn btn-info btn-elevate px-4",disabled:""===M,onClick:W},"  ","Allot","  "))))))}var H=a(14),q=a.n(H),F=a(1306),M=a(5),P={color:"#B5B5C3",fontWeight:"600",fontSize:"0.9rem",letterSpacing:"0.1rem",textTransform:"uppercase"},I={fontWeight:"400",lineHeight:"1.5",color:"#3f4254",fontSize:"13px",verticalAlign:"middle"};var B=function(e){var t=Object(l.useState)([]),a=Object(r.a)(t,2),c=a[0],i=a[1],u=Object(l.useState)([]),b=Object(r.a)(u,2),f=b[0],p=b[1],E=Object(l.useState)(!1),v=Object(r.a)(E,2),h=v[0],y=v[1],N=Object(l.useState)([]),R=Object(r.a)(N,2),w=R[0],x=R[1],O=Object(l.useState)(!1),j=Object(r.a)(O,2),S=j[0],C=j[1],T=Object(o.e)((function(e){return e.auth.user.user.hostel}),o.c);Object(l.useEffect)((function(){m.a.get("/api/clean-requests/admin?hostel=".concat(T)).then((function(e){i(e.data)})).catch((function(e){console.log(e)}))}),[e,T]);var k=[{name:"roomkeeper",label:"Room Keeper",options:{filter:!0,sort:!0,sortThirdClickReset:!0,customHeadLabelRender:function(){return n.a.createElement("span",{className:"table-vertical-center",style:P},"Room Keeper")},customBodyRender:function(e,t){return n.a.createElement("span",{style:I},e?n.a.createElement("span",{className:"font-weight-bold d-block"},e):void 0===t.rowData[10]||"admin"===t.rowData[10].role?n.a.createElement("button",{className:"btn btn-info btn-elevate btn-shadow-hover btn-md",disabled:"Rejected"===t.rowData[6],onClick:function(){C(!0),x({id:t.rowData[9],room:t.rowData[1],floor:t.rowData[2],date:t.rowData[4],time:t.rowData[5]})}},n.a.createElement("span",{className:"svg-icon"},n.a.createElement(q.a,{className:"svg-icon svg-icon-primary",src:Object(M.d)("/media/svg/icons/Clothes/Cap.svg"),title:"Allot RoomKeeper"})),"Allot"):n.a.createElement("button",{className:"btn btn-warning btn-elevate btn-shadow-hover btn-md",disabled:"Rejected"===t.rowData[6],onClick:function(){C(!0),x({rejectData:t.rowData[10],id:t.rowData[9],room:t.rowData[1],floor:t.rowData[2],date:t.rowData[4],time:t.rowData[5]})}},n.a.createElement("span",{className:"svg-icon mr-0"},n.a.createElement(q.a,{className:"svg-icon svg-icon-warning",src:Object(M.d)("/media/svg/icons/Text/Redo.svg"),title:"Allot RoomKeeper"})),"Re-Allot"))}}},{name:"room",label:"Room No.",options:{filter:!0,sort:!0,sortThirdClickReset:!0,customHeadLabelRender:function(){return n.a.createElement("span",{className:"table-vertical-center",style:P},"Room No.")},customBodyRender:function(e){return n.a.createElement("span",{style:I},e)}}},{name:"floor",label:"Floor",options:{filter:!0,sort:!0,sortThirdClickReset:!0,customHeadLabelRender:function(){return n.a.createElement("span",{className:"table-vertical-center",style:P},"Floor No.")},customBodyRender:function(e){return n.a.createElement("span",{style:I},e)}}},{name:"rating",label:"Ratings",sortThirdClickReset:!0,options:{display:"excluded",searchable:!1,filter:!0,sort:!1,customHeadLabelRender:function(){return n.a.createElement("span",{className:"table-vertical-center",style:P},"Rating")},customBodyRender:function(e,t){return n.a.createElement(n.a.Fragment,null,e||0)}}},{name:"date",label:"Date",options:{filter:!0,sort:!0,sortThirdClickReset:!0,customHeadLabelRender:function(){return n.a.createElement("span",{className:"table-vertical-center",style:P},"Date")},customBodyRender:function(e){return n.a.createElement("span",{style:I},e)}}},{name:"time",label:"Time Requested",options:{filter:!1,sort:!0,sortThirdClickReset:!0,customHeadLabelRender:function(){return n.a.createElement("span",{className:"table-vertical-center",style:P},"Time")},customBodyRender:function(e){return n.a.createElement("span",{style:I},e)}}},{name:"requestStatus",label:"Status",sortThirdClickReset:!0,options:{filter:!0,sort:!1,customHeadLabelRender:function(){return n.a.createElement("span",{className:"table-vertical-center",style:P},"Status")},customBodyRender:function(e){return n.a.createElement("span",{style:I},"Pending"===e&&n.a.createElement("span",{className:"label label-lg label-light-info label-inline"},e),"Alloted"===e&&n.a.createElement("span",{className:"label label-lg label-light-primary label-inline"},e),"Rejected"===e&&n.a.createElement("span",{className:"label label-lg label-light-danger label-inline"},e),"Completed"===e&&n.a.createElement("span",{className:"label label-lg label-light-success label-inline"},e))}}},{name:"timeIn",label:"Time In",sortThirdClickReset:!0,options:{filter:!1,sort:!1,customHeadLabelRender:function(){return n.a.createElement("span",{className:"table-vertical-center",style:P},"Time In")},customBodyRender:function(e){return n.a.createElement("span",{style:I},e||n.a.createElement("strong",{className:"text-muted"},"~~"))}}},{name:"timeOut",label:"Time Out",sortThirdClickReset:!0,options:{filter:!1,sort:!1,customHeadLabelRender:function(){return n.a.createElement("span",{className:"table-vertical-center",style:P},"Time Out")},customBodyRender:function(e){return n.a.createElement("span",{style:I},e||n.a.createElement("strong",{className:"text-muted"},"~~"))}}},{name:"_id",label:"Actions",options:{filter:!1,sort:!1,download:!1,empty:!0,print:!1,searchable:!1,customBodyRender:function(e,t){return n.a.createElement("div",null,n.a.createElement("button",{title:"Delete Clean-Request",className:"btn btn-light-danger font-weight-bold mr-2",disabled:"Pending"!==t.rowData[6],onClick:function(){y(!0),p({value:e,role:"admin",room:t.rowData[1],floor:t.rowData[2],date:t.rowData[4],time:t.rowData[5]})}},n.a.createElement("span",{className:"svg-icon mr-0"},n.a.createElement(q.a,{className:"svg-icon svg-icon-primary mr-1",src:Object(M.d)("/media/svg/icons/Design/Component.svg"),title:"Delete Clean-Request"})),"Reject"))}}},{name:"rejectReason",label:"Reject Reason",options:{filter:!1,sort:!1,download:!1,display:"excluded",print:!1,searchable:!1}}],H={expandableRows:!0,expandableRowsOnClick:!0,renderExpandableRow:function(e){return n.a.createElement(n.a.Fragment,null,!1!==e[6].props.children[3]&&(e[3].props.children>0?n.a.createElement(n.a.Fragment,null,n.a.createElement("td",{className:"font-weight-bold"},"Ratings:"),n.a.createElement("td",{colSpan:"8"},n.a.createElement(F.a,{initialRating:e[3].props.children,readonly:!0,emptySymbol:n.a.createElement("span",{className:"svg-icon svg-icon-lg"},n.a.createElement(q.a,{src:Object(M.d)("/media/svg/icons/General/Star.svg")})),fullSymbol:n.a.createElement("span",{className:"svg-icon svg-icon-lg svg-icon-primary"},n.a.createElement(q.a,{src:Object(M.d)("/media/svg/icons/General/Star.svg")}))}))):n.a.createElement(n.a.Fragment,null,n.a.createElement("td",{className:"font-weight-bold"},"Ratings:"),n.a.createElement("td",{className:"text-muted"},"*Not Yet Rated*"))),!1!==e[6].props.children[2]&&n.a.createElement("tr",null,n.a.createElement("td",{className:"text-danger font-weight-bold"},"RejectReason:"),n.a.createElement("td",{colSpan:"8"},n.a.createElement("div",{className:"text-dark-75 font-size-md"},e[10].message))))},downloadOptions:{filename:"Clean-Requests.csv",seperator:","},selectableRows:"none",filter:!0,elevation:0,rowsPerPage:10,rowHover:!1,searchOpen:!0,tableId:"AdminRequests",filterType:"dropdown",rowsPerPageOptions:[10,25,50,100],textLabels:{body:{noMatch:"No Requests Made!",toolTip:"Sort",columnHeaderTooltip:function(e){return"Sort for ".concat(e.label)}},pagination:{next:"Next Page",previous:"Previous Page",rowsPerPage:"Rows per page:",displayRows:"of"},toolbar:{search:"Search",downloadCsv:"Download CSV",print:"Print",viewColumns:"View Columns",filterTable:"Filter Table"},filter:{all:"All",title:"FILTERS",reset:"RESET"},viewColumns:{title:"Show Columns",titleAria:"Show/Hide Table Columns"},selectedRows:{text:"Student(s) selected",delete:"Delete",deleteAria:"Delete Selected Rows"}}};return n.a.createElement(n.a.Fragment,null,n.a.createElement(d.b,{className:"mb-0"},n.a.createElement(d.d,null,n.a.createElement("div",{className:"mt-4 mb-1"},n.a.createElement("h3",{className:"card-label font-weight-bolder text-dark mb-0"},"Clean Requests List"),n.a.createElement("span",{className:"text-muted font-weight-bold font-size-sm mt-1"},"Manage Clean Requests of your Organization."))),n.a.createElement(d.c,{style:{zIndex:"0"}},n.a.createElement(s.a,{title:"",data:c,columns:k,options:H,className:"card card-custom shadow-none border-bottom-0 table table-head-custom table-vertical-center overflow-hidden mb-0"}))),n.a.createElement(g,{data:f,hostel:T,onRefreshTable:function(e){i(e)},show:h,onHide:function(){y(!1)}}),n.a.createElement(D,{data:w,hostel:T,onRefreshTable:function(e){i(e)},show:S,onHide:function(){C(!1)}}))},V=a(381),L=a.n(V),A=a(244),K=a.n(A);function z(e){var t=e.data,a=e.onRefreshTable,o=e.show,c=e.onHide,s=e.hostel,i=Object(l.useState)(!1),p=Object(r.a)(i,2),g=p[0],E=p[1],v=Object(l.useState)(!1),h=Object(r.a)(v,2),y=h[0],N=h[1],R=function(){m.a.get("/api/clean-requests/roomkeeper?hostel=".concat(s,"&name=").concat(t.name)).then((function(e){a(e.data)})).catch((function(e){console.log(e)}))},w={timeIn:"",timeOut:""},x=f.d().shape({timeIn:f.f().required("Time-In is required"),timeOut:f.f().required("Time-Out is required")}),O=function(e){return j.touched[e]&&j.errors[e]?"is-invalid":j.touched[e]&&!j.errors[e]?"is-valid":""},j=Object(b.c)({initialValues:w,validationSchema:x,onSubmit:function(e){!function(e){var a=L()(e.timeIn).format("LT"),l=L()(e.timeOut).format("LT");N(!0),m.a.post("/api/completeRequest",{id:t.id,timeIn:a,timeOut:l}).then((function(){setTimeout((function(){N(!1)}),2e3)})).catch((function(e){console.log(e),N(!1)})).then((function(){R(),setTimeout((function(){c()}),1e3)}))}(e)},onReset:function(){j.setValues({timeIn:w.timeIn,timeOut:w.timeOut})}});return n.a.createElement(u.a,{size:"lg",show:o,onHide:c,"aria-labelledby":"Reject-Modal"},n.a.createElement("form",{onSubmit:j.handleSubmit,onReset:j.handleReset},y&&n.a.createElement(d.f,null),n.a.createElement(u.a.Header,{closeButton:!0},n.a.createElement(u.a.Title,{id:"Delete-Modal"},"Complete Clean Request",n.a.createElement(S.a,{variant:"subtitle1",display:"block",gutterBottom:!0},"Mark status of your clean request as complete."))),n.a.createElement(u.a.Body,null,y?n.a.createElement("span",null,"Updating Status..."):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-xl-2 col-lg-2 col-form-label text-alert"},"Room:"),n.a.createElement("div",{className:"col-lg-3 col-xl-3 "},n.a.createElement("input",{type:"text",className:"form-control",value:t.room,disabled:!0})),n.a.createElement("div",{className:"col-lg-2 col-xl-2 "}),n.a.createElement("label",{className:"col-xl-2 col-lg-2 col-form-label text-alert"},"Floor:"),n.a.createElement("div",{className:"col-lg-3 col-xl-3 "},n.a.createElement("input",{type:"text",className:"form-control",value:t.floor,disabled:!0}))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-xl-2 col-lg-2 col-form-label text-alert"},"Date:"),n.a.createElement("div",{className:"col-lg-3 col-xl-3 "},n.a.createElement("input",{type:"text",className:"form-control",value:t.date,disabled:!0})),n.a.createElement("div",{className:"col-lg-2 col-xl-2 "}),n.a.createElement("label",{className:"col-xl-2 col-lg-2 col-form-label text-alert"},"Time:"),n.a.createElement("div",{className:"col-lg-3 col-xl-3 "},n.a.createElement("input",{type:"text",className:"form-control",value:t.time,disabled:!0}))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-xl-2 col-lg-2 col-form-label text-alert"},"Time-In:"),n.a.createElement("div",{className:"col-lg-3 col-xl-3 mb-4"},n.a.createElement(K.a,Object.assign({placeholderText:"Time-In",dateFormat:"h:mm aa",showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:5,timeClassName:function(e){return e.getHours()>=12?"text-success":e.getHours()>=6&&"text-primary"},className:"form-control form-control-lg form-control-solid ".concat(O("timeIn")),style:{width:"100%"}},j.getFieldProps("timeIn"),{selected:j.values.timeIn,onChange:function(e){j.setFieldValue("timeIn",e)}})),j.touched.timeIn&&j.errors.timeIn?n.a.createElement("div",{className:"invalid-feedback d-block"},j.errors.timeIn):null),n.a.createElement("div",{className:"col-lg-2 col-xl-2 "}),n.a.createElement("label",{className:"col-xl-2 col-lg-2 col-form-label text-alert"},"Time-Out:"),n.a.createElement("div",{className:"col-lg-3 col-xl-3 mb-4"},n.a.createElement(K.a,Object.assign({placeholderText:"Time-Out",dateFormat:"h:mm aa",showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:5,timeClassName:function(e){return e.getHours()>=12?"text-success":e.getHours()>=6&&"text-primary"},className:"form-control form-control-lg form-control-solid ".concat(O("timeOut")),style:{width:"100%"}},j.getFieldProps("timeOut"),{selected:j.values.timeOut,onChange:function(e){j.setFieldValue("timeOut",e),j.values.timeIn>=e&&E(!0),j.values.timeIn<e&&E(!1)}})),g&&n.a.createElement("div",{className:"invalid-feedback d-block"},"Time-In should be greater than Time-Out"),j.touched.timeOut&&j.errors.timeOut?n.a.createElement("div",{className:"invalid-feedback d-block"},j.errors.timeOut):null)))),n.a.createElement(u.a.Footer,null,n.a.createElement("div",null,!y&&n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{type:"reset",onClick:c,className:"btn btn-light btn-elevate"},"Cancel"),n.a.createElement(n.a.Fragment,null," "),n.a.createElement("button",{type:"submit",className:"btn btn-success btn-elevate px-4"},"  ","Confirm","  "))))))}var _={color:"#B5B5C3",fontWeight:"600",fontSize:"0.9rem",letterSpacing:"0.1rem",textTransform:"uppercase"},G={fontWeight:"400",lineHeight:"1.5",color:"#3f4254",fontSize:"13px",verticalAlign:"middle"};var W=function(e){var t=Object(l.useState)([]),a=Object(r.a)(t,2),c=a[0],i=a[1],u=Object(l.useState)([]),b=Object(r.a)(u,2),f=b[0],p=b[1],E=Object(l.useState)(!1),v=Object(r.a)(E,2),h=v[0],y=v[1],N=Object(l.useState)([]),R=Object(r.a)(N,2),w=R[0],x=R[1],O=Object(l.useState)(!1),j=Object(r.a)(O,2),S=j[0],C=j[1],T=Object(o.e)((function(e){return e.auth.user.user}),o.c),k=T.hostel,D=T.name;Object(l.useEffect)((function(){m.a.get("/api/clean-requests/roomKeeper?hostel=".concat(k,"&name=").concat(D)).then((function(e){i(e.data)})).catch((function(e){console.log(e)}))}),[e,k,D]);var H=[{name:"_id",label:"Room Keeper",options:{filter:!1,sort:!1,download:!1,sortThirdClickReset:!0,customHeadLabelRender:function(){return n.a.createElement("span",{className:"table-vertical-center",style:_},"Rating")},customBodyRender:function(e,t){return n.a.createElement("span",{style:G},"Completed"===t.rowData[6]?t.rowData[3]>0?n.a.createElement(n.a.Fragment,null,n.a.createElement(F.a,{initialRating:t.rowData[3],readonly:!0,emptySymbol:n.a.createElement("span",{className:"svg-icon svg-icon-lg"},n.a.createElement(q.a,{src:Object(M.d)("/media/svg/icons/General/Star.svg")})),fullSymbol:n.a.createElement("span",{className:"svg-icon svg-icon-lg svg-icon-primary"},n.a.createElement(q.a,{src:Object(M.d)("/media/svg/icons/General/Star.svg")}))})):n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"text-muted"},"*Not Yet Rated*")):n.a.createElement("button",{className:"btn btn-success btn-elevate btn-shadow-hover btn-sm",onClick:function(){C(!0),x({name:D,id:e,room:t.rowData[1],floor:t.rowData[2],date:t.rowData[4],time:t.rowData[5]})}},n.a.createElement("span",{className:"svg-icon"},n.a.createElement(q.a,{className:"svg-icon svg-icon-primary",src:Object(M.d)("/media/svg/icons/Navigation/Double-check.svg"),title:"Mark As Completed"})),"Mark As Completed"))}}},{name:"room",label:"Room No.",options:{filter:!0,sort:!0,sortThirdClickReset:!0,customHeadLabelRender:function(){return n.a.createElement("span",{className:"table-vertical-center",style:_},"Room No.")},customBodyRender:function(e){return n.a.createElement("span",{style:G},e)}}},{name:"floor",label:"Floor",options:{filter:!0,sort:!0,sortThirdClickReset:!0,customHeadLabelRender:function(){return n.a.createElement("span",{className:"table-vertical-center",style:_},"Floor")},customBodyRender:function(e){return n.a.createElement("span",{style:G},e)}}},{name:"rating",label:"Ratings",sortThirdClickReset:!0,options:{display:"excluded",searchable:!1,filter:!0,sort:!1,download:!0,customHeadLabelRender:function(){return n.a.createElement("span",{className:"table-vertical-center",style:_},"Rating")},customBodyRender:function(e,t){return n.a.createElement(n.a.Fragment,null,e||0)}}},{name:"date",label:"Date",options:{filter:!0,sort:!0,sortThirdClickReset:!0,customHeadLabelRender:function(){return n.a.createElement("span",{className:"table-vertical-center",style:_},"Date")},customBodyRender:function(e){return n.a.createElement("span",{style:G},e)}}},{name:"time",label:"Time Requested",options:{filter:!0,sort:!0,sortThirdClickReset:!0,customHeadLabelRender:function(){return n.a.createElement("span",{className:"table-vertical-center",style:_},"Time")},customBodyRender:function(e){return n.a.createElement("span",{style:G},e)}}},{name:"requestStatus",label:"Status",sortThirdClickReset:!0,options:{filter:!0,sort:!1,customHeadLabelRender:function(){return n.a.createElement("span",{className:"table-vertical-center",style:_},"Status")},customBodyRender:function(e){return n.a.createElement("span",{style:G},"Alloted"===e&&n.a.createElement("span",{className:"label label-lg label-light-primary label-inline"},e),"Completed"===e&&n.a.createElement("span",{className:"label label-lg label-light-success label-inline"},e))}}},{name:"timeIn",label:"Time In",sortThirdClickReset:!0,options:{searchable:!1,filter:!1,sort:!1,customHeadLabelRender:function(){return n.a.createElement("span",{className:"table-vertical-center",style:_},"Time In")},customBodyRender:function(e){return n.a.createElement("span",{style:G},e||n.a.createElement("strong",{className:"text-muted"},"~~"))}}},{name:"timeOut",label:"Time Out",sortThirdClickReset:!0,options:{searchable:!1,filter:!1,sort:!1,customHeadLabelRender:function(){return n.a.createElement("span",{className:"table-vertical-center",style:_},"Time Out")},customBodyRender:function(e){return n.a.createElement("span",{style:G},e||n.a.createElement("strong",{className:"text-muted"},"~~"))}}},{name:"_id",label:"Actions",options:{filter:!1,sort:!1,download:!1,empty:!0,print:!1,searchable:!1,customBodyRender:function(e,t){return n.a.createElement("div",null,n.a.createElement("button",{title:"Reject Clean-Request",className:"btn btn-light-danger font-weight-bold mr-2",disabled:"Alloted"!==t.rowData[6],onClick:function(){y(!0),p({value:e,role:"roomkeeper",name:D,room:t.rowData[1],floor:t.rowData[2],date:t.rowData[4],time:t.rowData[5]})}},n.a.createElement("span",{className:"svg-icon mr-0"},n.a.createElement(q.a,{className:"svg-icon svg-icon-primary mr-1",src:Object(M.d)("/media/svg/icons/Design/Component.svg"),title:"Reject Clean-Request"})),"Reject"))}}},{name:"message",options:{display:"excluded",print:!1,download:!1,searchable:!1,filter:!1}}],P={expandableRows:!0,expandableRowsOnClick:!0,renderExpandableRow:function(e,t){return n.a.createElement(n.a.Fragment,null,n.a.createElement("tr",null,n.a.createElement("td",{className:"font-weight-bold text-center"},"Instructions:"),n.a.createElement("td",{colSpan:"10"},e[10]?n.a.createElement("div",{className:"text-dark-50"},e[10]," "):n.a.createElement("div",{className:"text-muted"},n.a.createElement("em",null,"*-No Instructions Provided-*")))))},downloadOptions:{filename:"Clean-Requests.csv",seperator:","},selectableRows:"none",filter:!0,elevation:0,rowsPerPage:10,rowHover:!1,searchOpen:!0,tableId:"AdminRequests",filterType:"dropdown",rowsPerPageOptions:[10,25,50,100],textLabels:{body:{noMatch:"No Requests Made!",toolTip:"Sort",columnHeaderTooltip:function(e){return"Sort for ".concat(e.label)}},pagination:{next:"Next Page",previous:"Previous Page",rowsPerPage:"Rows per page:",displayRows:"of"},toolbar:{search:"Search",downloadCsv:"Download CSV",print:"Print",viewColumns:"View Columns",filterTable:"Filter Table"},filter:{all:"All",title:"FILTERS",reset:"RESET"},viewColumns:{title:"Show Columns",titleAria:"Show/Hide Table Columns"},selectedRows:{text:"Student(s) selected",delete:"Delete",deleteAria:"Delete Selected Rows"}}};return n.a.createElement(n.a.Fragment,null,n.a.createElement(d.b,{className:"mb-0"},n.a.createElement(d.d,null,n.a.createElement("div",{className:"mt-4 mb-1"},n.a.createElement("h3",{className:"card-label font-weight-bolder text-dark mb-0"},"Clean Requests List"),n.a.createElement("span",{className:"text-muted font-weight-bold font-size-sm mt-1"},"Manage Clean Requests of your Organization."))),n.a.createElement(d.c,{style:{zIndex:"0"}},n.a.createElement(s.a,{title:"",data:c,columns:H,options:P,className:"card card-custom shadow-none border-bottom-0 table table-head-custom table-vertical-center overflow-hidden mb-0"}))),n.a.createElement(g,{data:f,hostel:k,onRefreshTable:function(e){i(e)},show:h,onHide:function(){y(!1)}}),n.a.createElement(z,{data:w,hostel:k,onRefreshTable:function(e){i(e)},show:S,onHide:function(){C(!1)}}))},U=a(1061),X=a(1060);var Y=function(e){var t=Object(l.useState)(!1),a=Object(r.a)(t,2),c=a[0],s=a[1],i=Object(l.useState)(!1),u=Object(r.a)(i,2),g=u[0],E=u[1],v=Object(l.useState)(""),h=Object(r.a)(v,2),y=h[0],N=h[1],R=Object(l.useState)(!1),w=Object(r.a)(R,2),x=w[0],O=w[1],j=Object(o.e)((function(e){return e.auth.user}),o.c),S=j.user._id,C=j.user.hostel,T=j.user.room,k=j.user.floor;Object(l.useEffect)((function(){}),[j]);var D={date:"",time:"",message:""},H=f.d().shape({date:f.f().required("Date is required"),time:f.f().required("Time is required"),message:f.f().max(100)}),F=function(e){return P.touched[e]&&P.errors[e]?"is-invalid":P.touched[e]&&!P.errors[e]?"is-valid":""},P=Object(b.c)({initialValues:D,validationSchema:H,onSubmit:function(t,a){!function(t,a,l){var n=L()(t.date).format("Do MMMM, yyyy"),o=L()(t.time).format("LT");s(!0),E(!1),setTimeout((function(){s(!1),l(!1),m.a.post("/api/clean-request/create",{date:n,time:o,studentid:S,hostel:C,room:T,floor:k,message:t.message}).then((function(t){O(!1),203===t.status?(a(t.data),N(t.data),E(!0)):200===t.status&&(O(!0),P.handleReset(),e.onCreate()),s(!1)})).catch((function(e){console.log(e),s(!1),l(!1),a("An Error Occured"),E(!0)}))}),1e3)}(t,a.setStatus,a.setSubmitting)},onReset:function(){P.setValues({date:D.date,time:D.time})}});return n.a.createElement("form",{className:"card card-custom",onSubmit:P.handleSubmit,onReset:P.handleReset},c&&n.a.createElement(d.f,null),n.a.createElement("div",{className:"card-header py-3"},n.a.createElement("div",{className:"card-title align-items-start flex-column"},n.a.createElement("h3",{className:"card-label font-weight-bolder text-dark"},"Create Request"),n.a.createElement("span",{className:"text-muted font-weight-bold font-size-sm mt-1"},"Creating the Clean Request for your Room."))),n.a.createElement("div",{className:"form"},n.a.createElement("div",{className:"card-body"},g&&n.a.createElement("div",{className:"alert alert-custom alert-light-danger fade show mb-10",role:"alert"},n.a.createElement("div",{className:"alert-icon"},n.a.createElement("span",{className:"svg-icon svg-icon-3x svg-icon-danger"},n.a.createElement(q.a,{src:Object(M.d)("/media/svg/icons/Code/Info-circle.svg")})," ")),n.a.createElement("div",{className:"alert-text font-weight-bold"},y),n.a.createElement("div",{className:"alert-close",onClick:function(){return E(!1)}},n.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},n.a.createElement("span",{"aria-hidden":"true"},n.a.createElement("i",{className:"ki ki-close"}))))),x&&n.a.createElement("div",{className:"alert alert-custom alert-light-success fade show mb-10",role:"alert"},n.a.createElement("div",{className:"alert-icon"},n.a.createElement("span",{className:"svg-icon svg-icon-3x svg-icon-success"},n.a.createElement(q.a,{src:Object(M.d)("/media/svg/icons/Code/Done-circle.svg")})," ")),n.a.createElement("div",{className:"alert-text font-weight-bold"},"Request Successflly Created."),n.a.createElement("div",{className:"alert-close",onClick:function(){return O(!1)}},n.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},n.a.createElement("span",{"aria-hidden":"true"},n.a.createElement("i",{className:"ki ki-close"}))))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-xl-3 col-lg-3 col-form-label text-alert"},"Schedule Clean Request:"),n.a.createElement("div",{className:"col-lg-3 col-xl-3 col-md-4 col-sm-6 mb-4"},n.a.createElement(K.a,Object.assign({placeholderText:"Date",dateFormat:"dd MMMM, yyyy",className:"form-control form-control-lg form-control-solid ".concat(F("date")),style:{width:"100%"}},P.getFieldProps("date"),{selected:P.values.date,onChange:function(e){P.setFieldValue("date",e)},minDate:(new Date).setDate((new Date).getDate()+1)})),P.touched.date&&P.errors.date?n.a.createElement("div",{className:"invalid-feedback"},P.errors.date):null),n.a.createElement("div",{className:"col-lg-3 col-xl-3 col-md-4 col-sm-6 mb-4"},n.a.createElement(K.a,Object.assign({placeholderText:"Time",dateFormat:"h:mm aa",showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:30,timeClassName:function(e){return e.getHours()>=12?"text-success":e.getHours()>=6&&"text-primary"},excludeTimes:[Object(U.default)(Object(X.default)(new Date,0),0),Object(U.default)(Object(X.default)(new Date,0),1),Object(U.default)(Object(X.default)(new Date,0),2),Object(U.default)(Object(X.default)(new Date,0),3),Object(U.default)(Object(X.default)(new Date,0),4),Object(U.default)(Object(X.default)(new Date,0),5),Object(U.default)(Object(X.default)(new Date,30),0),Object(U.default)(Object(X.default)(new Date,30),1),Object(U.default)(Object(X.default)(new Date,30),2),Object(U.default)(Object(X.default)(new Date,30),3),Object(U.default)(Object(X.default)(new Date,30),4),Object(U.default)(Object(X.default)(new Date,30),5)],className:"form-control form-control-lg form-control-solid ".concat(F("time")),style:{width:"100%"}},P.getFieldProps("time"),{selected:P.values.time,onChange:function(e){P.setFieldValue("time",e)}})),P.touched.time&&P.errors.time?n.a.createElement("div",{className:"invalid-feedback"},P.errors.time):null)),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-xl-3 col-lg-3 col-form-label text-alert"},"Additional Instructions(if any):"),n.a.createElement("div",{className:"col-lg-6 col-xl-6 "},n.a.createElement(p.a,Object.assign({placeholder:"Message",className:"form-control form-control-lg form-control-solid ".concat(F("message")),name:"message",autoComplete:"off"},P.getFieldProps("message"))),P.touched.message&&P.errors.message?n.a.createElement("div",{className:"invalid-feedback"},P.errors.message):null)),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-xl-3 col-lg-3 col-form-label text-alert"}),n.a.createElement("div",{className:"col-lg-9 col-xl-6"},n.a.createElement("button",{type:"submit",className:"btn btn-info font-weight-bold px-9 py-4 my-3",disabled:P.isSubmitting||P.touched&&!P.isValid},"Create",P.isSubmitting),n.a.createElement("button",{type:"reset",className:"btn btn-secondary font-weight-bold px-9 py-4 my-3 ml-5"},"Reset"))))))};function J(e){var t=e.data,a=e.onRefreshTable,o=e.show,c=e.onHide,s=e.studentId,i=Object(l.useState)(!1),b=Object(r.a)(i,2),f=b[0],p=b[1],g=Object(l.useState)(!1),E=Object(r.a)(g,2),v=E[0],h=E[1],y=function(){m.a.get("/api/clean-requests/student?id=".concat(s)).then((function(e){a(e.data)})).catch((function(e){console.log(e)}))};return n.a.createElement(u.a,{show:o,onHide:c,"aria-labelledby":"Delete-Modal"},f&&n.a.createElement(d.f,null),!v&&n.a.createElement(u.a.Header,{closeButton:!0},n.a.createElement(u.a.Title,{id:"Delete-Modal"},"Delete Clean-Request")),n.a.createElement(u.a.Body,null,v?n.a.createElement(n.a.Fragment,null,n.a.createElement("img",{src:"".concat(Object(M.d)("/media/svg/illustrations/features.svg")),alt:"user svg"}),n.a.createElement("h2",{className:"text-success font-weight-bold text-center"},"Successfully Deleted!")):f?n.a.createElement("span",null,"Request is deleting..."):n.a.createElement("span",null,"Are you sure?")),n.a.createElement(u.a.Footer,null,v?n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{type:"button",onClick:function(){c(),setTimeout((function(){h(!1)}),500)},className:"btn btn-success btn-shadow-hover font-weight-bolder w-100 py-3 text-center"},"Confirm")):n.a.createElement("div",null,n.a.createElement("button",{type:"button",onClick:c,className:"btn btn-light btn-elevate"},"Cancel"),n.a.createElement(n.a.Fragment,null," "),n.a.createElement("button",{type:"button",onClick:function(){p(!0),m.a.post("/api/deleteRequest",{id:t}).then((function(){setTimeout((function(){p(!1),h(!0),y()}),1e3)})).catch((function(e){console.log(e),p(!1)}))},className:"btn btn-primary btn-elevate"},"Delete"))))}function Q(e){var t=e.data,a=e.onRefreshTable,o=e.show,c=e.onHide,s=e.studentId,i=Object(l.useState)(!1),g=Object(r.a)(i,2),E=g[0],v=g[1],h=Object(l.useState)(2),y=Object(r.a)(h,2),N=y[0],R=y[1],w=function(){m.a.get("/api/clean-requests/student?id=".concat(s)).then((function(e){a(e.data),c()})).catch((function(e){console.log(e)}))},x=f.d().shape({message:f.f().max(100,"Message should be of at max 100 chars!"),suggestions:f.f().max(150,"Suggestion should be of at max 150 chars!"),complaints:f.f().max(150,"Complaint should be of at max 150 chars!")}),O=function(e){return j.touched[e]&&j.errors[e]?"is-invalid":j.touched[e]&&!j.errors[e]?"is-valid":""},j=Object(b.c)({initialValues:{message:"",suggestions:"",complaints:""},validationSchema:x,onSubmit:function(e){!function(e){v(!0),m.a.post("/api/ratings",{id:t.id,message:e.message,rating:N,suggestions:e.suggestions,complaints:e.complaints}).then((function(){setTimeout((function(){v(!1)}),2e3)})).catch((function(e){console.log(e),v(!1)})).then((function(){j.resetForm(),w(),R(2),setTimeout((function(){c()}),1e3)}))}(e)},onReset:function(){j.setValues({message:"",suggestions:"",complaints:""})}});return n.a.createElement(u.a,{size:"lg",show:o,onHide:c,"aria-labelledby":"Reject-Modal"},E&&n.a.createElement(d.f,null),n.a.createElement("form",{onSubmit:j.handleSubmit,onReset:j.handleReset},n.a.createElement(u.a.Header,{closeButton:!0},n.a.createElement(u.a.Title,{id:"Delete-Modal"},"Rate Clean-Request")),n.a.createElement(u.a.Body,null,E?n.a.createElement("span",null,"Rating in Progress..."):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-xl-2 col-lg-2 col-form-label text-alert"},"Date:"),n.a.createElement("div",{className:"col-lg-3 col-xl-3 "},n.a.createElement("input",{type:"text",className:"form-control",value:t.date,disabled:!0})),n.a.createElement("div",{className:"col-lg-2 col-xl-2 "}),n.a.createElement("label",{className:"col-xl-2 col-lg-2 col-form-label text-alert"},"Time:"),n.a.createElement("div",{className:"col-lg-3 col-xl-3 "},n.a.createElement("input",{type:"text",className:"form-control",value:t.time,disabled:!0}))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-xl-2 col-lg-2 col-form-label text-alert"},"Time- In:"),n.a.createElement("div",{className:"col-lg-3 col-xl-3 "},n.a.createElement("input",{type:"text",className:"form-control",value:t.timeIn,disabled:!0})),n.a.createElement("div",{className:"col-lg-2 col-xl-2 "}),n.a.createElement("label",{className:"col-xl-2 col-lg-2 col-form-label text-alert"},"Time-Out:"),n.a.createElement("div",{className:"col-lg-3 col-xl-3 "},n.a.createElement("input",{type:"text",className:"form-control",value:t.timeOut,disabled:!0}))),n.a.createElement("div",{className:"form-group row text-center"},n.a.createElement("div",{className:"col-lg-3 col-xl-3 text-left mt-4 text-dark-65"},n.a.createElement("h4",null,"Rating:")),n.a.createElement("div",{className:"col-lg-6 col-xl-6 "},n.a.createElement(F.a,{initialRating:N,emptySymbol:n.a.createElement("span",{className:"svg-icon svg-icon-4x"},n.a.createElement(q.a,{src:Object(M.d)("/media/svg/icons/General/Star.svg")})),fullSymbol:n.a.createElement("span",{className:"svg-icon svg-icon-4x svg-icon-primary"},n.a.createElement(q.a,{src:Object(M.d)("/media/svg/icons/General/Star.svg")})),onChange:function(e){return R(e)}})),n.a.createElement("div",{className:"col-lg-3 col-xl-3 "})),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-xl-2 col-lg-2 col-form-label text-alert"},"Message:"),n.a.createElement("div",{className:"col-lg-10 col-xl-10 "},n.a.createElement(p.a,Object.assign({placeholder:"Message",className:"form-control form-control-lg form-control-solid ".concat(O("message")),name:"message",autoComplete:"off"},j.getFieldProps("message"))),j.touched.message&&j.errors.message?n.a.createElement("div",{className:"invalid-feedback"},j.errors.message):null)),n.a.createElement("div",{className:"form-group row mb-0"},n.a.createElement("label",{className:"col-xl-6 col-lg-6 col-form-label text-warning"},"Suggestions:"),n.a.createElement("label",{className:"col-xl-6 col-lg-6 col-form-label text-danger"},"Complaints:")),n.a.createElement("div",{className:"form-group row"},n.a.createElement("div",{className:"col-lg-6 col-xl-6 "},n.a.createElement(p.a,Object.assign({placeholder:"We'd love to hear some suggestions!",className:"form-control form-control-lg form-control-solid ".concat(O("suggestions")),name:"suggestions",autoComplete:"off"},j.getFieldProps("suggestions"))),j.touched.suggestions&&j.errors.suggestions?n.a.createElement("div",{className:"invalid-feedback"},j.errors.suggestions):null),n.a.createElement("div",{className:"col-lg-6 col-xl-6 "},n.a.createElement(p.a,Object.assign({placeholder:"Got Complaints for RoomKeeping Service?",className:"form-control form-control-lg form-control-solid ".concat(O("complaints")),name:"complaints",autoComplete:"off"},j.getFieldProps("complaints"))),j.touched.complaints&&j.errors.complaints?n.a.createElement("div",{className:"invalid-feedback"},j.errors.complaints):null)))),n.a.createElement(u.a.Footer,null,!E&&n.a.createElement("div",null,n.a.createElement("button",{type:"reset",onClick:c,className:"btn btn-light btn-elevate"},"Cancel"),n.a.createElement(n.a.Fragment,null," "),n.a.createElement("button",{type:"submit",className:"btn btn-info btn-elevate"},"Rate")))))}var Z={color:"#B5B5C3",fontWeight:"600",fontSize:"0.9rem",letterSpacing:"0.1rem",textTransform:"uppercase"},$={fontWeight:"400",lineHeight:"1.5",color:"#3f4254",fontSize:"13px",verticalAlign:"middle"};var ee=function(e){var t=Object(l.useState)([]),a=Object(r.a)(t,2),c=a[0],i=a[1],u=Object(l.useState)(!1),b=Object(r.a)(u,2),f=b[0],p=b[1],g=Object(l.useState)([]),E=Object(r.a)(g,2),v=E[0],h=E[1],y=Object(l.useState)(!1),N=Object(r.a)(y,2),R=N[0],w=N[1],x=Object(l.useState)([]),O=Object(r.a)(x,2),j=O[0],S=O[1],C=Object(o.e)((function(e){return e.auth.user.user._id}),o.c);Object(l.useEffect)((function(){m.a.get("/api/clean-requests/student?id=".concat(C)).then((function(e){i(e.data)})).catch((function(e){console.log(e)}))}),[e,C]);var T=[{name:"roomkeeper",label:"Room Keeper",options:{filter:!0,sort:!0,sortThirdClickReset:!0,customHeadLabelRender:function(){return n.a.createElement("span",{className:"table-vertical-center",style:Z},"Room Keeper")},customBodyRender:function(e){return n.a.createElement("span",{style:$},e?n.a.createElement("span",{className:"font-weight-bold"},e):n.a.createElement("span",{className:"text-danger"},"~Not Alloted~"))}}},{name:"date",label:"Date",options:{filter:!0,sort:!0,sortThirdClickReset:!0,customHeadLabelRender:function(){return n.a.createElement("span",{className:"table-vertical-center",style:Z},"Date")},customBodyRender:function(e){return n.a.createElement("span",{style:$},e)}}},{name:"time",label:"Time",options:{filter:!0,sort:!0,sortThirdClickReset:!0,customHeadLabelRender:function(){return n.a.createElement("span",{className:"table-vertical-center",style:Z},"Time")},customBodyRender:function(e){return n.a.createElement("span",{style:$},e)}}},{name:"requestStatus",label:"Status",sortThirdClickReset:!0,options:{filter:!0,sort:!1,customHeadLabelRender:function(){return n.a.createElement("span",{className:"table-vertical-center",style:Z},"Status")},customBodyRender:function(e){return n.a.createElement("span",{style:$},"Pending"===e&&n.a.createElement("span",{className:"label label-lg label-light-info label-inline"},e),"Alloted"===e&&n.a.createElement("span",{className:"label label-lg label-light-primary label-inline"},e),"Rejected"===e&&n.a.createElement("span",{className:"label label-lg label-light-danger label-inline"},e),"Completed"===e&&n.a.createElement("span",{className:"label label-lg label-light-success label-inline"},e))}}},{name:"rating",label:"Ratings",sortThirdClickReset:!0,options:{display:"excluded",searchable:!1,filter:!0,sort:!1,customHeadLabelRender:function(){return n.a.createElement("span",{className:"table-vertical-center",style:Z},"Rating")},customBodyRender:function(e,t){return n.a.createElement(n.a.Fragment,null,e||0)}}},{name:"timeIn",label:"Time In",sortThirdClickReset:!0,options:{filter:!1,sort:!1,customHeadLabelRender:function(){return n.a.createElement("span",{className:"table-vertical-center",style:Z},"Time In")},customBodyRender:function(e){return n.a.createElement("span",{style:$},e||n.a.createElement("strong",{className:"text-muted"},"~~"))}}},{name:"timeOut",label:"Time Out",sortThirdClickReset:!0,options:{filter:!1,sort:!1,customHeadLabelRender:function(){return n.a.createElement("span",{className:"table-vertical-center",style:Z},"Time Out")},customBodyRender:function(e){return n.a.createElement("span",{style:$},e||n.a.createElement("strong",{className:"text-muted"},"~~"))}}},{name:"_id",label:"Actions",options:{filter:!1,sort:!1,download:!1,empty:!0,print:!1,searchable:!1,customBodyRender:function(e,t){return n.a.createElement("div",null,n.a.createElement("button",{title:"Rate Clean-Request",disabled:"Completed"!==t.rowData[3]||!!t.rowData[4],className:"btn btn-icon btn-light btn-hover-primary btn-sm mr-2",onClick:function(){w(!0),S({id:e,date:t.rowData[1],time:t.rowData[2],timeIn:t.rowData[5],timeOut:t.rowData[6]})}},n.a.createElement("span",{className:"svg-icon svg-icon-md svg-icon-primary"},n.a.createElement(q.a,{src:Object(M.d)("/media/svg/icons/General/Star.svg"),title:"Rate Clean-Request"}))),n.a.createElement("button",{title:"Delete Clean-Request",disabled:"Pending"!==t.rowData[3],className:"btn btn-icon btn-light btn-hover-danger btn-sm ml-2",onClick:function(){p(!0),h(e)}},n.a.createElement("span",{className:"svg-icon svg-icon-md svg-icon-danger"},n.a.createElement(q.a,{src:Object(M.d)("/media/svg/icons/General/Trash.svg"),title:"Delete Clean-Request"}))))}}},{name:"message",options:{display:"excluded",print:!1,download:!1,searchable:!1,filter:!1}},{name:"rejectReason",options:{display:"excluded",print:!1,download:!1,searchable:!1,filter:!1}}],k={expandableRows:!0,expandableRowsOnClick:!0,renderExpandableRow:function(e){return n.a.createElement(n.a.Fragment,null,!1!==e[3].props.children[3]&&(e[4].props.children>0?n.a.createElement(n.a.Fragment,null,n.a.createElement("td",{className:"font-weight-bold"},"Ratings:"),n.a.createElement("td",{colSpan:"8"},n.a.createElement(F.a,{initialRating:e[4].props.children,readonly:!0,emptySymbol:n.a.createElement("span",{className:"svg-icon svg-icon-lg"},n.a.createElement(q.a,{src:Object(M.d)("/media/svg/icons/General/Star.svg")})),fullSymbol:n.a.createElement("span",{className:"svg-icon svg-icon-lg svg-icon-primary"},n.a.createElement(q.a,{src:Object(M.d)("/media/svg/icons/General/Star.svg")}))}))):n.a.createElement(n.a.Fragment,null,n.a.createElement("td",{className:"font-weight-bold"},"Ratings:"),n.a.createElement("td",{className:"text-muted"},"*Not Yet Rated*"))),n.a.createElement("tr",null,n.a.createElement("td",{className:"font-weight-bold"},"Instructions:"),n.a.createElement("td",{colSpan:"8"},e[8]?n.a.createElement("div",{className:"text-dark-50"},e[8]," "):n.a.createElement("div",{className:"text-muted"},n.a.createElement("em",null,"*-No Instructions Provided-*")))),!1!==e[3].props.children[2]&&n.a.createElement("tr",null,n.a.createElement("td",{className:"text-danger font-weight-bold"},"RejectReason:"),n.a.createElement("td",{colSpan:"8"},n.a.createElement("div",{className:"text-dark-75 font-size-md"},e[9].message))))},download:!1,print:!1,selectableRows:"none",filter:!0,elevation:0,rowsPerPage:10,rowHover:!1,searchOpen:!0,tableId:"StudentRequestsTable",filterType:"dropdown",rowsPerPageOptions:[10,25,50,100],textLabels:{body:{noMatch:"No Requests Made!",toolTip:"Sort",columnHeaderTooltip:function(e){return"Sort for ".concat(e.label)}},pagination:{next:"Next Page",previous:"Previous Page",rowsPerPage:"Rows per page:",displayRows:"of"},toolbar:{search:"Search",downloadCsv:"Download CSV",print:"Print",viewColumns:"View Columns",filterTable:"Filter Table"},filter:{all:"All",title:"FILTERS",reset:"RESET"},viewColumns:{title:"Show Columns",titleAria:"Show/Hide Table Columns"},selectedRows:{text:"Student(s) selected",delete:"Delete",deleteAria:"Delete Selected Rows"}}};return n.a.createElement(n.a.Fragment,null,n.a.createElement(d.b,{className:"mb-0"},n.a.createElement(d.d,null,n.a.createElement("div",{className:"mt-4 mb-1"},n.a.createElement("h3",{className:"card-label font-weight-bolder text-dark mb-0"},"Clean Requests List"),n.a.createElement("span",{className:"text-muted font-weight-bold font-size-sm mt-1"},"Manage or Check the status of your Clean Requests."))),n.a.createElement(d.c,{style:{zIndex:"0"}},n.a.createElement(s.a,{title:"",data:c,columns:T,options:k,className:"card card-custom shadow-none border-bottom-0 table table-head-custom table-vertical-center overflow-hidden mb-0"}))),n.a.createElement(Q,{studentId:C,show:R,onHide:function(){return w(!1)},data:j,onRefreshTable:function(e){S([]),i(e)}}),n.a.createElement(J,{data:v,studentId:C,onRefreshTable:function(e){i(e)},show:f,onHide:function(){p(!1)}}))};var te=function(){var e=Object(l.useState)(!1),t=Object(r.a)(e,2),a=t[0],o=t[1];return n.a.createElement("div",null,n.a.createElement(Y,{onCreate:function(){o(!a)}}),n.a.createElement("br",null),n.a.createElement(ee,{reloadTable:a}))};t.default=function(){var e=Object(o.e)((function(e){return e.auth.user.role}));return n.a.createElement("div",null,"admin"===e&&n.a.createElement(B,null),"roomkeeper"===e&&n.a.createElement(W,null),"student"===e&&n.a.createElement(te,null))}}}]);
//# sourceMappingURL=5.5805b7db.chunk.js.map